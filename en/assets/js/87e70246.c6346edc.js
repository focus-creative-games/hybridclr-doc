"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[9637],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>y});var i=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function r(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},s=Object.keys(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var d=i.createContext({}),o=function(e){var t=i.useContext(d),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},c=function(e){var t=o(e.components);return i.createElement(d.Provider,{value:t},e.children)},m="mdxType",b={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},u=i.forwardRef((function(e,t){var n=e.components,a=e.mdxType,s=e.originalType,d=e.parentName,c=r(e,["components","mdxType","originalType","parentName"]),m=o(n),u=a,y=m["".concat(d,".").concat(u)]||m[u]||b[u]||s;return n?i.createElement(y,l(l({ref:t},c),{},{components:n})):i.createElement(y,l({ref:t},c))}));function y(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var s=n.length,l=new Array(s);l[0]=u;var r={};for(var d in t)hasOwnProperty.call(t,d)&&(r[d]=t[d]);r.originalType=e,r[m]="string"==typeof e?e:a,l[1]=r;for(var o=2;o<s;o++)l[o]=n[o];return i.createElement.apply(null,l)}return i.createElement.apply(null,n)}u.displayName="MDXCreateElement"},36274:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>l,default:()=>b,frontMatter:()=>s,metadata:()=>r,toc:()=>o});var i=n(87462),a=(n(67294),n(3905));const s={},l="Multiple DHE Assemblies",r={unversionedId:"business/ultimate/multidheassemblies",id:"business/ultimate/multidheassemblies",title:"Multiple DHE Assemblies",description:"When there are multiple DHE assemblies, you can decide whether to call LoadOriginalDifferentialHybridAssembly or LoadDifferentialHybridAssemblyUnchecked interface for loading based on whether each assembly has changed,",source:"@site/i18n/en/docusaurus-plugin-content-docs/current/business/ultimate/multidheassemblies.md",sourceDirName:"business/ultimate",slug:"/business/ultimate/multidheassemblies",permalink:"/en/docs/business/ultimate/multidheassemblies",draft:!1,tags:[],version:"current",frontMatter:{}},d={},o=[{value:"Restrictions",id:"restrictions",level:2},{value:"Transitivity of LoadDifferentialHybridAssemblyUnchecked",id:"transitivity-of-loaddifferentialhybridassemblyunchecked",level:2},{value:"Calculating DHE Assemblies that Need to be Loaded with LoadDifferentialHybridAssemblyUnchecked",id:"calculating-dhe-assemblies-that-need-to-be-loaded-with-loaddifferentialhybridassemblyunchecked",level:2}],c={toc:o},m="wrapper";function b(e){let{components:t,...n}=e;return(0,a.kt)(m,(0,i.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"multiple-dhe-assemblies"},"Multiple DHE Assemblies"),(0,a.kt)("p",null,"When there are multiple DHE assemblies, you can decide whether to call LoadOriginalDifferentialHybridAssembly or LoadDifferentialHybridAssemblyUnchecked interface for loading based on whether each assembly has changed,\nbut there are some additional restrictions."),(0,a.kt)("h2",{id:"restrictions"},"Restrictions"),(0,a.kt)("p",null,"Loading multiple DHE assemblies needs to meet the following restrictions:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Load in the dependency order of assemblies"),(0,a.kt)("li",{parentName:"ul"},"If a DHE assembly is loaded using LoadDifferentialHybridAssemblyUnchecked, then all DHE assemblies that directly or indirectly depend on it must also use\nLoadDifferentialHybridAssemblyUnchecked for loading, ",(0,a.kt)("strong",{parentName:"li"},"even if these assemblies have no changes"))),(0,a.kt)("h2",{id:"transitivity-of-loaddifferentialhybridassemblyunchecked"},"Transitivity of LoadDifferentialHybridAssemblyUnchecked"),(0,a.kt)("p",null,"Due to some complex implementation reasons, if a DHE assembly is loaded using LoadDifferentialHybridAssemblyUnchecked, then all DHE assemblies that directly or indirectly depend on it must also use\nLoadDifferentialHybridAssemblyUnchecked for loading."),(0,a.kt)("p",null,"For example: Suppose assembly B references assembly A:"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"Assembly"),(0,a.kt)("th",{parentName:"tr",align:null},"A"),(0,a.kt)("th",{parentName:"tr",align:null},"B"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Loading Method"),(0,a.kt)("td",{parentName:"tr",align:null},"LoadOriginalDifferentialHybridAssembly"),(0,a.kt)("td",{parentName:"tr",align:null},"LoadOriginalDifferentialHybridAssembly or LoadDifferentialHybridAssemblyUnchecked")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Loading Method"),(0,a.kt)("td",{parentName:"tr",align:null},"LoadDifferentialHybridAssemblyUnchecked"),(0,a.kt)("td",{parentName:"tr",align:null},"LoadDifferentialHybridAssemblyUnchecked")))),(0,a.kt)("p",null,"If assembly A changes, even if assembly B has no modifications, it must still be loaded using LoadDifferentialHybridAssemblyUnchecked."),(0,a.kt)("h2",{id:"calculating-dhe-assemblies-that-need-to-be-loaded-with-loaddifferentialhybridassemblyunchecked"},"Calculating DHE Assemblies that Need to be Loaded with LoadDifferentialHybridAssemblyUnchecked"),(0,a.kt)("p",null,"Suppose you have multiple DHE assemblies A1-An. In a certain update, only A1 and A3 have changed. Simply using LoadDifferentialHybridAssemblyUnchecked to load only these two assemblies is not enough,\nall assemblies that directly or indirectly depend on A1 and A3 need to be loaded using LoadDifferentialHybridAssemblyUnchecked. When there are few assemblies, this is not a problem, you can manually find out\nthe assemblies that depend on them, but when there are many assemblies, it's easy to make mistakes."),(0,a.kt)("p",null,"Starting from v7.5.0, a new function ",(0,a.kt)("inlineCode",{parentName:"p"},"HybridCLR.Editor.DHE.BuildUtils::ComputeAssembliesLoadedByLoadDifferentialHybridAssembly")," has been added to calculate the final list of DHE assemblies that need to be loaded using LoadDifferentialHybridAssemblyUnchecked based on the known list of changed\nDHE assemblies."),(0,a.kt)("p",null,"Example code is as follows:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-csharp"},'    BuildTarget target = EditorUserBuildSettings.activeBuildTarget;\n    HybridCLRSettings settings = HybridCLRSettings.Instance;\n    string[] differentialHybridAssemblyList = settings.differentialHybridAssemblies;\n\n    string currentAssemblyDir = SettingsUtil.GetHotUpdateDllsOutputDirByTarget(target);\n    \n    var assList = BuildUtils.ComputeAssembliesLoadedByLoadDifferentialHybridAssembly(new string[] { "MyCode" }, differentialHybridAssemblyList, currentAssemblyDir);\n    foreach (var ass in assList)\n    {\n        Debug.Log($"assembly:{ass}");\n    }\n\n')))}b.isMDXComponent=!0}}]);