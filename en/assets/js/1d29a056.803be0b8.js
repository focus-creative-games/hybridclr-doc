"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[5484],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>m});var r=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=r.createContext({}),c=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=c(e.components);return r.createElement(s.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},h=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),u=c(n),h=a,m=u["".concat(s,".").concat(h)]||u[h]||d[h]||o;return n?r.createElement(m,i(i({ref:t},p),{},{components:n})):r.createElement(m,i({ref:t},p))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=h;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[u]="string"==typeof e?e:a,i[1]=l;for(var c=2;c<o;c++)i[c]=n[c];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}h.displayName="MDXCreateElement"},61842:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>d,frontMatter:()=>o,metadata:()=>l,toc:()=>c});var r=n(87462),a=(n(67294),n(3905));const o={},i="HybridCLR + lua/js/python",l={unversionedId:"basic/workwithscriptlanguage",id:"version-8.5.0/basic/workwithscriptlanguage",title:"HybridCLR + lua/js/python",description:"Some projects are already online with most of their code implemented in lua; or some new projects have been developed halfway using lua. They cannot completely switch to full C# development, but they want to integrate HybridCLR to help gradually transition to full native C# hot updates. Since HybridCLR is a native C# hot update technology, it natively supports working with these scripting languages.",source:"@site/i18n/en/docusaurus-plugin-content-docs/version-8.5.0/basic/workwithscriptlanguage.md",sourceDirName:"basic",slug:"/basic/workwithscriptlanguage",permalink:"/en/docs/8.5.0/basic/workwithscriptlanguage",draft:!1,tags:[],version:"8.5.0",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Migrating from netstandard to .Net Framework",permalink:"/en/docs/8.5.0/basic/migratefromnetstandard"},next:{title:"Code Structure and Versioning",permalink:"/en/docs/8.5.0/basic/architecture"}},s={},c=[{value:"Principle",id:"principle",level:2},{value:"xlua",id:"xlua",level:2},{value:"tolua, slua, puerts",id:"tolua-slua-puerts",level:2}],p={toc:c},u="wrapper";function d(e){let{components:t,...n}=e;return(0,a.kt)(u,(0,r.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"hybridclr--luajspython"},"HybridCLR + lua/js/python"),(0,a.kt)("p",null,"Some projects are already online with most of their code implemented in lua; or some new projects have been developed halfway using lua. They cannot completely switch to full C# development, but they want to integrate HybridCLR to help gradually transition to full native C# hot updates. Since HybridCLR is a native C# hot update technology, it natively supports working with these scripting languages."),(0,a.kt)("h2",{id:"principle"},"Principle"),(0,a.kt)("p",null,"All third-party scripts (lua, typescript, python, etc.) interact with C# code by depending on C# functions marked with ",(0,a.kt)("inlineCode",{parentName:"p"},"[MonoPInvokeCallback]")," for native callbacks.\nil2cpp binds a separate Wrapper function for each function marked with ",(0,a.kt)("inlineCode",{parentName:"p"},"[MonoPInvokeCallback]"),", handling issues like parameter passing and return value marshaling between managed and native."),(0,a.kt)("p",null,"Similarly, HybridCLR also needs to generate corresponding Wrapper functions for each function marked with ",(0,a.kt)("inlineCode",{parentName:"p"},"[MonoPInvokeCallback]"),". However, for platforms like iOS that prohibit JIT, it's obviously impossible to dynamically generate these wrapper functions at runtime. Therefore, corresponding Wrapper functions need to be reserved in advance for such functions that may be used in the future."),(0,a.kt)("p",null,"For how to reserve Wrapper functions, see the documentation ",(0,a.kt)("a",{parentName:"p",href:"./monopinvokecallback"},"MonoPInvokeCallback Support"),"."),(0,a.kt)("h2",{id:"xlua"},"xlua"),(0,a.kt)("p",null,"xlua doesn't consider modularization, with all generated code in the global Assembly-CSharp, even creating partial classes associated with Runtime code. Therefore, you may need to make minor adjustments to the generated code of these hot update solutions to work with hot updates.\nCommunity members have already created a ",(0,a.kt)("inlineCode",{parentName:"p"},"HybridCLR + xlua")," project ",(0,a.kt)("a",{parentName:"p",href:"https://gitee.com/ldr123/HybridCLRXlua"},"HybridCLRXlua")," that's working. Developers who don't fully understand can learn from this reference."),(0,a.kt)("h2",{id:"tolua-slua-puerts"},"tolua, slua, puerts"),(0,a.kt)("p",null,"Just ensure that enough ReversePInvokeWrapper functions are reserved, that the generated wrapper code can be placed in hot update modules, and that they are correctly registered."))}d.isMDXComponent=!0}}]);