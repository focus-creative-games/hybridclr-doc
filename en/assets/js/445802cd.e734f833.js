"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[8699],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>m});var r=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var c=r.createContext({}),s=function(e){var t=r.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=s(e.components);return r.createElement(c.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},h=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,c=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),u=s(n),h=a,m=u["".concat(c,".").concat(h)]||u[h]||d[h]||o;return n?r.createElement(m,i(i({ref:t},p),{},{components:n})):r.createElement(m,i({ref:t},p))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=h;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l[u]="string"==typeof e?e:a,i[1]=l;for(var s=2;s<o;s++)i[s]=n[s];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}h.displayName="MDXCreateElement"},47760:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>i,default:()=>d,frontMatter:()=>o,metadata:()=>l,toc:()=>s});var r=n(87462),a=(n(67294),n(3905));const o={},i="HybridCLR+lua/js/python",l={unversionedId:"basic/workwithscriptlanguage",id:"basic/workwithscriptlanguage",title:"HybridCLR+lua/js/python",description:"Some projects have been launched, and most of their codes have been implemented in lua; or some new projects have been developed halfway in lua, and they cannot completely switch to full C# development, but hope",source:"@site/i18n/en/docusaurus-plugin-content-docs/current/basic/workwithscriptlanguage.md",sourceDirName:"basic",slug:"/basic/workwithscriptlanguage",permalink:"/en/docs/basic/workwithscriptlanguage",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Migrate from netstandard to .Net Framework",permalink:"/en/docs/basic/migratefromnetstandard"},next:{title:"Code Architecture And Version",permalink:"/en/docs/basic/architecture"}},c={},s=[{value:"Principle",id:"principle",level:2},{value:"xlua",id:"xlua",level:2},{value:"tolua, slua, puerts",id:"tolua-slua-puerts",level:2}],p={toc:s},u="wrapper";function d(e){let{components:t,...n}=e;return(0,a.kt)(u,(0,r.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"hybridclrluajspython"},"HybridCLR+lua/js/python"),(0,a.kt)("p",null,"Some projects have been launched, and most of their codes have been implemented in lua; or some new projects have been developed halfway in lua, and they cannot completely switch to full C# development, but hope\nto be able to access HybridCLR at the same time to help slowly transition to all native C# hot updates. Since HybridCLR is a native C# hot update technology, native support works with these scripting languages."),(0,a.kt)("h2",{id:"principle"},"Principle"),(0,a.kt)("p",null,"All third-party scripts (lua, typescript, python, etc.) interacting with C# code rely on marking the C# function to be called back from native with ",(0,a.kt)("inlineCode",{parentName:"p"},"[MonoPInvokeCallback]"),"."),(0,a.kt)("p",null,"il2cpp will bind a separate Wrapper function to each function marked with ",(0,a.kt)("inlineCode",{parentName:"p"},"[MonoPInvokeCallback]")," to handle issues such as marshal of the return value between managed and native."),(0,a.kt)("p",null,"Similarly, hybridclr also needs to generate a corresponding Wrapper function for each function marked with ",(0,a.kt)("inlineCode",{parentName:"p"},"[MonoPInvokeCallback]"),". However, for platforms like iOS that have disabled jit, it is obviously impossible to dynamically generate these wrapper functions at runtime. Therefore, it is necessary to reserve corresponding wrapper functions for such functions that may be used in the future."),(0,a.kt)("p",null,"For details on how to reserve wrapper functions, see the document ",(0,a.kt)("a",{parentName:"p",href:"./monopinvokecallback"},"MonoPInvokeCallback support"),"."),(0,a.kt)("h2",{id:"xlua"},"xlua"),(0,a.kt)("p",null,"xlua has not considered modularization, and the generated code is all in the global Assembly-CSharp, and even made into a partial class associated with the Runtime code, so you may need to make a small adjustment to the generated code of these hot update solutions to work with hot updates."),(0,a.kt)("p",null,"Some group members have already created the ",(0,a.kt)("inlineCode",{parentName:"p"},"HybridCLR+xlua")," project ",(0,a.kt)("a",{parentName:"p",href:"https://gitee.com/ldr123/HybridCLRXlua"},"HybridCLRXlua"),", which has been run. Developers who do not fully understand it can learn from it."),(0,a.kt)("h2",{id:"tolua-slua-puerts"},"tolua, slua, puerts"),(0,a.kt)("p",null,"Make sure enough ReversePInvokeWrapper functions are reserved and the generated wrapper code can be placed in the hot update module and registered correctly."))}d.isMDXComponent=!0}}]);