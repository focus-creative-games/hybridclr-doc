"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[8983],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>g});var r=n(67294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var l=r.createContext({}),p=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},c=function(e){var t=p(e.components);return r.createElement(l.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,i=e.mdxType,a=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),u=p(n),m=i,g=u["".concat(l,".").concat(m)]||u[m]||d[m]||a;return n?r.createElement(g,o(o({ref:t},c),{},{components:n})):r.createElement(g,o({ref:t},c))}));function g(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var a=n.length,o=new Array(a);o[0]=m;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[u]="string"==typeof e?e:i,o[1]=s;for(var p=2;p<a;p++)o[p]=n[p];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},38140:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>d,frontMatter:()=>a,metadata:()=>s,toc:()=>p});var r=n(87462),i=(n(67294),n(3905));const a={},o="Full Generic Sharing",s={unversionedId:"business/fullgenericsharing",id:"business/fullgenericsharing",title:"Full Generic Sharing",description:"Although supplemental metadata completely solves the AOT generic problem, supplemental metadata leads to the need to carry supplemental metadata dlls with the package or download them during hot updates, causing increased package size or increased hot update time.",source:"@site/i18n/en/docusaurus-plugin-content-docs/current/business/fullgenericsharing.md",sourceDirName:"business",slug:"/business/fullgenericsharing",permalink:"/en/docs/business/fullgenericsharing",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Differential Hybrid Execution",permalink:"/en/docs/business/differentialhybridexecution"},next:{title:"Metadata Optimization",permalink:"/en/docs/business/metadataoptimization"}},l={},p=[{value:"Supported Versions",id:"supported-versions",level:2},{value:"Principle",id:"principle",level:2},{value:"Configuration",id:"configuration",level:2}],c={toc:p},u="wrapper";function d(e){let{components:t,...n}=e;return(0,i.kt)(u,(0,r.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"full-generic-sharing"},"Full Generic Sharing"),(0,i.kt)("p",null,"Although supplemental metadata completely solves the AOT generic problem, supplemental metadata leads to the need to carry supplemental metadata dlls with the package or download them during hot updates, causing increased package size or increased hot update time.\nLoading supplemental metadata not only significantly increases memory usage but also increases startup time. For scenarios like WeChat mini-games that have strict requirements for package size and memory, this is a significant issue.\nAdditionally, supplemented generic functions execute in interpretation mode, which also reduces runtime performance."),(0,i.kt)("p",null,"After HybridCLR supports ",(0,i.kt)("inlineCode",{parentName:"p"},"full generic sharing"),", supplemental metadata is no longer needed, simplifying the workflow and better addressing the above shortcomings of supplemental metadata."),(0,i.kt)("h2",{id:"supported-versions"},"Supported Versions"),(0,i.kt)("p",null,"Supports Unity 2021 and higher LTS versions."),(0,i.kt)("h2",{id:"principle"},"Principle"),(0,i.kt)("p",null,"The old generic sharing technology could only perform generic sharing for class types. Starting from 2021.3.x LTS versions, il2cpp already supports ",(0,i.kt)("inlineCode",{parentName:"p"},"full generic sharing")," technology,\nmeaning generic parameters can be shared regardless of type (including value types). HybridCLR utilizes this mechanism to achieve perfect support for AOT generics without needing supplemental metadata."),(0,i.kt)("h2",{id:"configuration"},"Configuration"),(0,i.kt)("admonition",{type:"warning"},(0,i.kt)("p",{parentName:"admonition"},(0,i.kt)("inlineCode",{parentName:"p"},"faster (smaller build)")," will have a significant impact on generic function performance (15% or even higher), so it's recommended not to enable this option."),(0,i.kt)("p",{parentName:"admonition"},"If using 2021 version and there's no memory pressure, it's still recommended to use supplemental metadata technology to solve generic problems.")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"2020 version does not support full generic sharing"),(0,i.kt)("li",{parentName:"ul"},"2021 version needs to set IL2CPP Code Generation option to ",(0,i.kt)("inlineCode",{parentName:"li"},"faster(smaller build)")),(0,i.kt)("li",{parentName:"ul"},"2022 version enables full generic sharing by default and cannot be disabled. If setting IL2CPP Code Generation option to ",(0,i.kt)("inlineCode",{parentName:"li"},"faster(smaller build)"),", it can further reduce package size.")))}d.isMDXComponent=!0}}]);