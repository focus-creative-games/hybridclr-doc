"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[8983],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>h});var r=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var l=r.createContext({}),p=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},c=function(e){var t=p(e.components);return r.createElement(l.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,i=e.mdxType,a=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),u=p(n),m=i,h=u["".concat(l,".").concat(m)]||u[m]||d[m]||a;return n?r.createElement(h,o(o({ref:t},c),{},{components:n})):r.createElement(h,o({ref:t},c))}));function h(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var a=n.length,o=new Array(a);o[0]=m;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[u]="string"==typeof e?e:i,o[1]=s;for(var p=2;p<a;p++)o[p]=n[p];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},8140:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>d,frontMatter:()=>a,metadata:()=>s,toc:()=>p});var r=n(7462),i=(n(7294),n(3905));const a={},o="Fully generic sharing",s={unversionedId:"business/fullgenericsharing",id:"business/fullgenericsharing",title:"Fully generic sharing",description:"Although supplementary metadata completely solves the AOT generic problem, supplementary metadata will cause the need to download the supplementary metadata dll with the package or hot update, resulting in an increase in package size or hot update time.",source:"@site/i18n/en/docusaurus-plugin-content-docs/current/business/fullgenericsharing.md",sourceDirName:"business",slug:"/business/fullgenericsharing",permalink:"/en/docs/business/fullgenericsharing",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Differential Hybrid Execution",permalink:"/en/docs/business/differentialhybridexecution"},next:{title:"Metadata optimization",permalink:"/en/docs/business/metadataoptimization"}},l={},p=[{value:"Supported versions",id:"supported-versions",level:2},{value:"Principle",id:"principle",level:2},{value:"set up",id:"set-up",level:2}],c={toc:p},u="wrapper";function d(e){let{components:t,...n}=e;return(0,i.kt)(u,(0,r.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"fully-generic-sharing"},"Fully generic sharing"),(0,i.kt)("p",null,"Although supplementary metadata completely solves the AOT generic problem, supplementary metadata will cause the need to download the supplementary metadata dll with the package or hot update, resulting in an increase in package size or hot update time.\nLoading supplementary metadata not only resulted in a noticeable increase in memory footprint, but also increased startup time. For occasions such as WeChat mini-games that have strict requirements on package size and memory, this is a problem that has a greater impact.\nIn addition, the supplemented generic functions are executed in an interpreted manner, which also reduces the running performance."),(0,i.kt)("p",null,"After HybridCLR supports ",(0,i.kt)("inlineCode",{parentName:"p"},"full generic sharing"),", it no longer needs to supplement metadata, simplifies the workflow, runs AOT generics natively, greatly improves performance, and completely solves the above shortcomings of supplementing metadata."),(0,i.kt)("h2",{id:"supported-versions"},"Supported versions"),(0,i.kt)("p",null,"Supports Unity 2021 and later LTS versions."),(0,i.kt)("h2",{id:"principle"},"Principle"),(0,i.kt)("p",null,"The old generic sharing technology can only perform generic sharing on class types. Since the 2021.3.x LTS version, il2cpp has supported ",(0,i.kt)("inlineCode",{parentName:"p"},"full generic sharing")," technology,\nThat is, generic parameters can be shared regardless of their type (including value types). HybridCLR uses this mechanism to realize that it does not need to supplement metadata, and it can perfectly support AOT generics."),(0,i.kt)("h2",{id:"set-up"},"set up"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"2021.3.x LTS version. Enabled when ",(0,i.kt)("inlineCode",{parentName:"li"},"Il2Cpp Code Generation")," option in Build Settings is ",(0,i.kt)("inlineCode",{parentName:"li"},"faster(smaller) build"),(0,i.kt)("inlineCode",{parentName:"li"},"full generic sharing")," mechanism. When this option is enabled, all generic instances of a generic function (regardless of whether the generic parameter is a value type or a class type) completely share a single code."),(0,i.kt)("li",{parentName:"ul"},"2022.3.x LTS version. Mandatory support for ",(0,i.kt)("inlineCode",{parentName:"li"},"full generic sharing"),", even if the ",(0,i.kt)("inlineCode",{parentName:"li"},"faster runtime")," option is used in Build Settings, this mechanism will be enabled. Difference from ",(0,i.kt)("inlineCode",{parentName:"li"},"faster(smaller) build"),"\nThe reason is: ",(0,i.kt)("inlineCode",{parentName:"li"},"faster runtime")," will use a separate generic function to implement the generic function that has been instantiated in AOT, instead of using a fully generic shared version, which improves the execution performance of the generic function;\nThe ",(0,i.kt)("inlineCode",{parentName:"li"},"faster(smaller) build")," option forces all generic functions of the same function to use one code, which has the same meaning as the 2021 version.")))}d.isMDXComponent=!0}}]);