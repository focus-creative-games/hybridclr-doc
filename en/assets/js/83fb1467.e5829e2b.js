"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[2893],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>h});var r=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var l=r.createContext({}),u=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},c=function(e){var t=u(e.components);return r.createElement(l.Provider,{value:t},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,i=e.mdxType,a=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),p=u(n),m=i,h=p["".concat(l,".").concat(m)]||p[m]||d[m]||a;return n?r.createElement(h,o(o({ref:t},c),{},{components:n})):r.createElement(h,o({ref:t},c))}));function h(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var a=n.length,o=new Array(a);o[0]=m;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[p]="string"==typeof e?e:i,o[1]=s;for(var u=2;u<a;u++)o[u]=n[u];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},6685:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>d,frontMatter:()=>a,metadata:()=>s,toc:()=>u});var r=n(7462),i=(n(7294),n(3905));const a={},o="Full Generic Sharing",s={unversionedId:"business/fullgenericsharing",id:"version-7.6.0/business/fullgenericsharing",title:"Full Generic Sharing",description:"Although supplementary metadata has completely solved the AOT generic problem, it leads to the need to carry supplementary metadata DLLs with the package or download them during hot updates, thus increasing the size of the package or the time required for hot updates.",source:"@site/i18n/en/docusaurus-plugin-content-docs/version-7.6.0/business/fullgenericsharing.md",sourceDirName:"business",slug:"/business/fullgenericsharing",permalink:"/en/docs/7.6.0/business/fullgenericsharing",draft:!1,tags:[],version:"7.6.0",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Differential Hybrid Execution (DHE)",permalink:"/en/docs/7.6.0/business/differentialhybridexecution"},next:{title:"Metadata Optimization",permalink:"/en/docs/7.6.0/business/metadataoptimization"}},l={},u=[{value:"Supported Versions",id:"supported-versions",level:2},{value:"Principle",id:"principle",level:2},{value:"Configuration",id:"configuration",level:2}],c={toc:u},p="wrapper";function d(e){let{components:t,...n}=e;return(0,i.kt)(p,(0,r.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"full-generic-sharing"},"Full Generic Sharing"),(0,i.kt)("p",null,"Although supplementary metadata has completely solved the AOT generic problem, it leads to the need to carry supplementary metadata DLLs with the package or download them during hot updates, thus increasing the size of the package or the time required for hot updates.\nLoading supplementary metadata not only significantly increases memory usage but also increases startup time. This is a major issue for scenarios with strict requirements on package size and memory, such as WeChat mini-games.\nFurthermore, generic functions that have been supplemented are executed in interpreted mode, which also reduces runtime performance."),(0,i.kt)("p",null,"With the introduction of Full Generic Sharing in HybridCLR, there is no longer a need for supplementary metadata, simplifying the workflow and effectively addressing the aforementioned shortcomings of supplementary metadata."),(0,i.kt)("h2",{id:"supported-versions"},"Supported Versions"),(0,i.kt)("p",null,"Supported Unity LTS versions include Unity 2021 and higher."),(0,i.kt)("h2",{id:"principle"},"Principle"),(0,i.kt)("p",null,"The old generic sharing technology could only share generics for class types. Starting from Unity 2021.3.x LTS versions, il2cpp has supported the ",(0,i.kt)("inlineCode",{parentName:"p"},"Full Generic Sharing")," technology, which means that generic parameters of any type (including value types) can be shared. HybridCLR leverages this mechanism to achieve perfect support for AOT generics without the need for supplementary metadata."),(0,i.kt)("h2",{id:"configuration"},"Configuration"),(0,i.kt)("admonition",{type:"warning"},(0,i.kt)("p",{parentName:"admonition"},"Enabling ",(0,i.kt)("inlineCode",{parentName:"p"},"faster (smaller build)")," will significantly affect the performance of generic functions (15% or even higher), so it is recommended not to enable this option."),(0,i.kt)("p",{parentName:"admonition"},"If you are using Unity 2021 and there is no memory pressure, it is still recommended to use the supplementary metadata technology to solve the generic problem.")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"The 2020 version does not support Full Generic Sharing."),(0,i.kt)("li",{parentName:"ul"},"For the 2021 version, the IL2CPP Code Generation option should be set to ",(0,i.kt)("inlineCode",{parentName:"li"},"faster (smaller build)"),"."),(0,i.kt)("li",{parentName:"ul"},"The 2022 version has Full Generic Sharing enabled by default and cannot be disabled. If the IL2CPP Code Generation option is set to ",(0,i.kt)("inlineCode",{parentName:"li"},"faster (smaller build)"),", it can further reduce the package size.")))}d.isMDXComponent=!0}}]);