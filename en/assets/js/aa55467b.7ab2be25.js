"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[6690],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>b});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),u=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},d=function(e){var t=u(e.components);return a.createElement(s.Provider,{value:t},e.children)},c="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},p=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,d=i(e,["components","mdxType","originalType","parentName"]),c=u(n),p=r,b=c["".concat(s,".").concat(p)]||c[p]||m[p]||o;return n?a.createElement(b,l(l({ref:t},d),{},{components:n})):a.createElement(b,l({ref:t},d))}));function b(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,l=new Array(o);l[0]=p;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i[c]="string"==typeof e?e:r,l[1]=i;for(var u=2;u<o;u++)l[u]=n[u];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}p.displayName="MDXCreateElement"},15702:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>m,frontMatter:()=>o,metadata:()=>i,toc:()=>u});var a=n(87462),r=(n(67294),n(3905));const o={},l="Hot Reload Technology",i={unversionedId:"business/reload/hotreloadassembly",id:"business/reload/hotreloadassembly",title:"Hot Reload Technology",description:"Hot reload technology is used to completely unload or reload an assembly, suitable for mini-game collection type games. This solution is only available in commercial versions.",source:"@site/i18n/en/docusaurus-plugin-content-docs/current/business/reload/hotreloadassembly.md",sourceDirName:"business/reload",slug:"/business/reload/hotreloadassembly",permalink:"/en/docs/business/reload/hotreloadassembly",draft:!1,tags:[],version:"current",frontMatter:{}},s={},u=[{value:"Supported Features",id:"supported-features",level:2},{value:"Unsupported Features and Special Requirements",id:"unsupported-features-and-special-requirements",level:2},{value:"Memory Unload Rate",id:"memory-unload-rate",level:2}],d={toc:u},c="wrapper";function m(e){let{components:t,...n}=e;return(0,r.kt)(c,(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"hot-reload-technology"},"Hot Reload Technology"),(0,r.kt)("p",null,"Hot reload technology is used to completely unload or reload an assembly, suitable for mini-game collection type games. This solution is only available in ",(0,r.kt)("strong",{parentName:"p"},"commercial versions"),"."),(0,r.kt)("h2",{id:"supported-features"},"Supported Features"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Supports unloading assemblies, unloading 100% of the memory occupied by assemblies"),(0,r.kt)("li",{parentName:"ul"},"Supports reloading assemblies, code can change arbitrarily or even be completely different (MonoBehaviour and Scriptable have certain limitations)"),(0,r.kt)("li",{parentName:"ul"},"Supports ",(0,r.kt)("strong",{parentName:"li"},"limiting the set of functions that can be accessed within hot update assemblies"),", suitable for creating sandbox environments in UGC games to prevent malicious player code from causing damage.")),(0,r.kt)("h2",{id:"unsupported-features-and-special-requirements"},"Unsupported Features and Special Requirements"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Requires business code to no longer use objects or functions from unloaded assemblies, and to exit all executing old logic"),(0,r.kt)("li",{parentName:"ul"},"Cannot directly unload dependent assemblies; must unload in reverse dependency order, first unloading dependents, then dependencies. For example, if A.dll depends on B.dll, A.dll must be unloaded first, then B.dll"),(0,r.kt)("li",{parentName:"ul"},"MonoBehaviour, ScriptableObject, and types marked with ",(0,r.kt)("inlineCode",{parentName:"li"},"[Serializable]"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Requires that event or message functions like Awake, OnEnable in reloaded MonoBehaviour do not change in number (but function bodies can change)"),(0,r.kt)("li",{parentName:"ul"},"Requires that serialized field names of script classes with the same name in the old assembly do not change after reloading (types can change)"),(0,r.kt)("li",{parentName:"ul"},"If field type is a custom type A (class, struct, or enum) from an unloadable assembly, it must be marked with the ",(0,r.kt)("inlineCode",{parentName:"li"},"[Serializable]")," attribute"),(0,r.kt)("li",{parentName:"ul"},"Does not support field types like ",(0,r.kt)("inlineCode",{parentName:"li"},"List<A>")," where A is a type from an unloadable assembly; replace with ",(0,r.kt)("inlineCode",{parentName:"li"},"A[]")),(0,r.kt)("li",{parentName:"ul"},"Cannot be generic or inherit from generic types, e.g., ",(0,r.kt)("inlineCode",{parentName:"li"},"class MyScript<T>")," or ",(0,r.kt)("inlineCode",{parentName:"li"},"class MyScript : CommonScript<int>")))),(0,r.kt)("li",{parentName:"ul"},"Some libraries that cache reflection information (this behavior is most common in serialization-related libraries like LitJson) need to clear cached reflection information after hot reload"),(0,r.kt)("li",{parentName:"ul"},"Does not support destructors, ~XXX(). Also does not allow instantiation of generic classes with destructors where generic parameters include types from this assembly"),(0,r.kt)("li",{parentName:"ul"},"Incompatible with DOTS. Due to DOTS heavily caching type information and complex implementation, it's difficult to individually clear cached information.")),(0,r.kt)("h2",{id:"memory-unload-rate"},"Memory Unload Rate"),(0,r.kt)("p",null,"Except for the following metadata memory that cannot be unloaded, almost all (99.9%) metadata can be unloaded:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Script classes like MonoBehaviour, ScriptableObject. Their corresponding Il2CppClass at runtime level is referenced internally by Unity engine and cannot be released, but most member metadata like methods can be released"),(0,r.kt)("li",{parentName:"ul"},"Types marked with ",(0,r.kt)("inlineCode",{parentName:"li"},"[Serializable]"),". Similar to MonoBehaviour, they may also be referenced internally by Unity engine during serialization and cannot be released."),(0,r.kt)("li",{parentName:"ul"},"Generic classes used during assembly execution that don't involve types from this assembly. For example, ",(0,r.kt)("inlineCode",{parentName:"li"},"List<int>")," metadata won't be released, but ",(0,r.kt)("inlineCode",{parentName:"li"},"List<MyHotReloadClass>")," will be released")),(0,r.kt)("p",null,"All unreleased metadata (MonoBehaviour, Serializable classes) will be ",(0,r.kt)("strong",{parentName:"p"},"reused")," when reloading the assembly. Multiple loads and unloads of the same assembly will only cause one unreleased behavior and won't lead to leakage or continuous growth of unreleased metadata memory."),(0,r.kt)("p",null,"In actual projects, for most assemblies, over 99% of metadata memory can be unloaded."))}m.isMDXComponent=!0}}]);