"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[6690],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>h});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),u=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},c=function(e){var t=u(e.components);return a.createElement(s.Provider,{value:t},e.children)},d="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},p=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),d=u(n),p=r,h=d["".concat(s,".").concat(p)]||d[p]||m[p]||o;return n?a.createElement(h,l(l({ref:t},c),{},{components:n})):a.createElement(h,l({ref:t},c))}));function h(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,l=new Array(o);l[0]=p;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i[d]="string"==typeof e?e:r,l[1]=i;for(var u=2;u<o;u++)l[u]=n[u];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}p.displayName="MDXCreateElement"},5702:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>m,frontMatter:()=>o,metadata:()=>i,toc:()=>u});var a=n(7462),r=(n(7294),n(3905));const o={},l="HotReload Technology",i={unversionedId:"business/reload/hotreloadassembly",id:"business/reload/hotreloadassembly",title:"HotReload Technology",description:"Hot reload technology is used to completely uninstall or reload an assembly, which is suitable for games of the mini-game collection type. This solution only provides commercial version.",source:"@site/i18n/en/docusaurus-plugin-content-docs/current/business/reload/hotreloadassembly.md",sourceDirName:"business/reload",slug:"/business/reload/hotreloadassembly",permalink:"/en/docs/business/reload/hotreloadassembly",draft:!1,tags:[],version:"current",frontMatter:{}},s={},u=[{value:"Supported features",id:"supported-features",level:2},{value:"Unsupported features and special requirements",id:"unsupported-features-and-special-requirements",level:2},{value:"Memory unloading rate",id:"memory-unloading-rate",level:2}],c={toc:u},d="wrapper";function m(e){let{components:t,...n}=e;return(0,r.kt)(d,(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"hotreload-technology"},"HotReload Technology"),(0,r.kt)("p",null,"Hot reload technology is used to completely uninstall or reload an assembly, which is suitable for games of the mini-game collection type. This solution only provides ",(0,r.kt)("strong",{parentName:"p"},"commercial version"),"."),(0,r.kt)("h2",{id:"supported-features"},"Supported features"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Support uninstalling assemblies, uninstalling 100% of the memory occupied by assemblies"),(0,r.kt)("li",{parentName:"ul"},"Support reloading assemblies, the code can be arbitrarily changed or even completely different (MonoBehaviour and Scriptable have certain restrictions)"),(0,r.kt)("li",{parentName:"ul"},"Support ",(0,r.kt)("strong",{parentName:"li"},"limiting the set of functions that can be accessed in hot updates of assemblies"),", which is suitable for creating sandbox environments in UGC games to avoid damage caused by malicious player code.")),(0,r.kt)("h2",{id:"unsupported-features-and-special-requirements"},"Unsupported features and special requirements"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Require that business code will no longer use objects or functions in the uninstalled assembly, and exit all old logic in execution"),(0,r.kt)("li",{parentName:"ul"},"Cannot directly uninstall the dependent assembly, must first uninstall the dependent in reverse dependency order, and then uninstall the dependent. For example, if A.dll depends on B.dll, you need to uninstall A.dll first, then uninstall B.dll"),(0,r.kt)("li",{parentName:"ul"},"MonoBehaviour is related to ScriptableObject"),(0,r.kt)("li",{parentName:"ul"},"It is required that events or message functions in the overloaded MonoBehaviour, such as Awake and OnEable, do not be added or deleted (but the function body can change)"),(0,r.kt)("li",{parentName:"ul"},"It is required that the serialized field name of the script class with the same name in the old assembly does not change after overloading (the type can change)"),(0,r.kt)("li",{parentName:"ul"},"If the field type is a custom type A (class or struct or enum) in the uninstallable assembly, it must be given the ",(0,r.kt)("inlineCode",{parentName:"li"},"[Serializable]")," attribute"),(0,r.kt)("li",{parentName:"ul"},"The field type ",(0,r.kt)("inlineCode",{parentName:"li"},"List<A>")," is not supported, where A is a type in the uninstallable assembly, please replace it with ",(0,r.kt)("inlineCode",{parentName:"li"},"A[]")),(0,r.kt)("li",{parentName:"ul"},"Generic types cannot be inherited, such as ",(0,r.kt)("inlineCode",{parentName:"li"},"class MyScript : CommonScript<int>")),(0,r.kt)("li",{parentName:"ul"},"Some libraries that cache reflection information (this behavior is most common in serialization-related libraries, such as LitJson), need to clean up the cached reflection information after hot reloading"),(0,r.kt)("li",{parentName:"ul"},"Destructors, ~XXX(), are not supported. It is also not allowed to instantiate generic classes with destructors whose generic parameters are of this assembly type"),(0,r.kt)("li",{parentName:"ul"},"Incompatible with dots. Since dots caches a large amount of type information and the implementation is complex, it is difficult to clean up the cache information separately.")),(0,r.kt)("h2",{id:"memory-unloading-rate"},"Memory unloading rate"),(0,r.kt)("p",null,"Except for the following metadata memory that cannot be unloaded, almost all other (99.9%) metadata can be unloaded:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Script classes such as MonoBehavoiur and ScriptableObject. The Il2CppClass corresponding to them at the runtime level will be referenced by the Unity engine internally and cannot be released, but most member metadata such as method can be released"),(0,r.kt)("li",{parentName:"ul"},"Types marked with ",(0,r.kt)("inlineCode",{parentName:"li"},"[Serializable]"),". Similar to MonoBehaviour, they may also be referenced by the Unity engine memory during serialization and cannot be released."),(0,r.kt)("li",{parentName:"ul"},"Generic classes used during the operation of this assembly, but not involving this assembly type. For example, ",(0,r.kt)("inlineCode",{parentName:"li"},"List<int>")," metadata will not be released, but ",(0,r.kt)("inlineCode",{parentName:"li"},"List<MyHotReloadClass>")," will be released")),(0,r.kt)("p",null,"All unreleased metadata (MonoBehaviour, Serializable class) will be reused when the assembly is loaded again. Loading and unloading the same assembly multiple times will only cause one unreleased behavior, which will not cause leaks or continuous growth of unreleased metadata memory."),(0,r.kt)("p",null,"In actual projects, more than 99% of metadata memory can be unloaded for most assemblies."))}m.isMDXComponent=!0}}]);