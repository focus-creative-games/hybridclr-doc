<!doctype html>
<html lang="en-us" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-business/basicencryption">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">Code Encryption | HybridCLR</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://hybridclr.doc.code-philosophy.com/en/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://hybridclr.doc.code-philosophy.com/en/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://hybridclr.doc.code-philosophy.com/en/docs/business/basicencryption"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Code Encryption | HybridCLR"><meta data-rh="true" name="description" content="The community version loads the original dll directly, forcing developers to carry and download the original dll. These original dlls can be decompiled by tools like ILSpy"><meta data-rh="true" property="og:description" content="The community version loads the original dll directly, forcing developers to carry and download the original dll. These original dlls can be decompiled by tools like ILSpy"><link data-rh="true" rel="icon" href="/en/img/logo.png"><link data-rh="true" rel="canonical" href="https://hybridclr.doc.code-philosophy.com/en/docs/business/basicencryption"><link data-rh="true" rel="alternate" href="https://hybridclr.doc.code-philosophy.com/docs/business/basicencryption" hreflang="zh-cn"><link data-rh="true" rel="alternate" href="https://hybridclr.doc.code-philosophy.com/en/docs/business/basicencryption" hreflang="en-us"><link data-rh="true" rel="alternate" href="https://hybridclr.doc.code-philosophy.com/docs/business/basicencryption" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://MHX0T95QPO-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/en/blog/rss.xml" title="HybridCLR RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/en/blog/atom.xml" title="HybridCLR Atom Feed">



<link rel="search" type="application/opensearchdescription+xml" title="HybridCLR" href="/en/opensearch.xml"><link rel="stylesheet" href="/en/assets/css/styles.d6735dd1.css">
<link rel="preload" href="/en/assets/js/runtime~main.3267a2b5.js" as="script">
<link rel="preload" href="/en/assets/js/main.6ae60f83.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/en/"><div class="navbar__logo"><img src="/en/img/logo.png" alt="My Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/en/img/logo.png" alt="My Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">HybridCLR</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/en/docs/intro">Tutorial</a><a class="navbar__item navbar__link" href="/en/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/focus-creative-games/hybridclr" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/docs/business/basicencryption" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh-cn">中文</a></li><li><a href="/en/docs/business/basicencryption" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en-us">English</a></li></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/intro">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/other/businesscase">Business Project Cases</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" href="/en/docs/beginner">Beginner Guides</a><button aria-label="Toggle the collapsible sidebar category &#x27;Beginner Guides&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/beginner/quickstart">Getting Started</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/beginner/monobehaviour">Use MonoBehaviour</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/beginner/generic">Use Generics</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/beginner/otherhelp">Other Information</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/en/docs/basic">Guides</a><button aria-label="Toggle the collapsible sidebar category &#x27;Guides&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/en/docs/business">Business Edition</a><button aria-label="Toggle the collapsible sidebar category &#x27;Business Edition&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/business/intro">Introduce</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/business/differentialhybridexecution">Differential Hybrid Execution</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/business/fullgenericsharing">Fully Generic Sharing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/business/dots">DOTS Support</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/business/metadataoptimization">Metadata Optimization</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/business/basicoptimization">Execution Optimization</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/business/advancedoptimization">Offline Instruction Optimization</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/en/docs/business/basicencryption">Code Encryption</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/business/accesspolicy">Access Control Policy</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/business/businesscase">Commercial Project Cases</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/en/docs/pro">Professional Edition</a><button aria-label="Toggle the collapsible sidebar category &#x27;Professional Edition&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/en/docs/ultimate">Ultimate Edition</a><button aria-label="Toggle the collapsible sidebar category &#x27;Ultimate Edition&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/en/docs/reload">Hotreload Edition</a><button aria-label="Toggle the collapsible sidebar category &#x27;Hotreload Edition&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/en/docs/help">Help</a><button aria-label="Toggle the collapsible sidebar category &#x27;Help&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/en/docs/other">Others</a><button aria-label="Toggle the collapsible sidebar category &#x27;Others&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/en/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/en/docs/business"><span itemprop="name">Business Edition</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Code Encryption</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Code Encryption</h1><p>The community version loads the original dll directly, forcing developers to carry and download the original dll. These original dlls can be decompiled by tools like ILSpy
, causing serious safety problems. Even if the developer encrypts it, it can easily be intercepted in the memory and obtain the decrypted dll content.</p><p>We provide the industry&#x27;s top managed code hardening technology, which effectively prevents code from being cracked and tampered with by malicious third parties.</p><table><thead><tr><th>Technology</th><th>Safety Index</th><th>Achieved</th></tr></thead><tbody><tr><td>Metadata obfuscation</td><td>⭐⭐</td><td>✔</td></tr><tr><td>Metadata encryption</td><td>⭐⭐⭐⭐</td><td>✔</td></tr><tr><td>Structure Virtualization</td><td>⭐⭐⭐</td><td>✔</td></tr><tr><td>Encrypted Virtualization</td><td>⭐⭐⭐</td><td>✔</td></tr><tr><td>Delayed decryption</td><td>⭐⭐⭐</td><td>✔</td></tr><tr><td>Instruction virtualization</td><td>⭐⭐⭐⭐⭐</td><td>✔</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_LWe7" id="metadata-obfuscation">Metadata obfuscation<a href="#metadata-obfuscation" class="hash-link" aria-label="Direct link to Metadata obfuscation" title="Direct link to Metadata obfuscation">​</a></h2><p>Due to clr&#x27;s own mechanism, no matter how complex the encryption is, valid metadata information such as types, fields, function names, etc. can be obtained through reflection in the memory.
This information must be added to the security by obfuscating the metadata itself, i.e. completely losing the original plaintext information from the original level.</p><p>Because instruction obfuscation will significantly harm performance, only pure information types such as types, fields, and functions are obfuscated. We mainly protect code security through virtualization technology.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="metadata-encryption">Metadata encryption<a href="#metadata-encryption" class="hash-link" aria-label="Direct link to Metadata encryption" title="Direct link to Metadata encryption">​</a></h2><table><thead><tr><th>Technology</th><th>Structure Virtualization</th><th>Encryption Virtualization</th><th>Lazy Decryption</th><th>Security Index</th></tr></thead><tbody><tr><td>Customized dll file structure</td><td></td><td></td><td></td><td>⭐</td></tr><tr><td>~string stream encryption</td><td></td><td>✔</td><td></td><td>⭐⭐</td></tr><tr><td>~blob stream encryption</td><td></td><td>✔</td><td></td><td>⭐⭐</td></tr><tr><td>~US stream encryption</td><td></td><td>✔</td><td>✔</td><td>⭐⭐⭐</td></tr><tr><td>~table stream encryption</td><td>✔</td><td>✔</td><td>✔</td><td>⭐⭐⭐⭐</td></tr><tr><td>method body data encryption</td><td></td><td>✔</td><td>✔</td><td>⭐⭐⭐</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="custom-dll-file-structure">Custom dll file structure<a href="#custom-dll-file-structure" class="hash-link" aria-label="Direct link to Custom dll file structure" title="Direct link to Custom dll file structure">​</a></h3><p>The original dll file is in PE format. We changed it to a custom file structure and cannot be opened using decompilation tools such as ILSpy.</p><p>Supports structure virtualization technology, that is, the dll structure of each version can be completely different, which significantly increases the cost of cracking.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="string-stream-encryption">~string stream encryption<a href="#string-stream-encryption" class="hash-link" aria-label="Direct link to ~string stream encryption" title="Direct link to ~string stream encryption">​</a></h3><p>The ~string stream stores strings used internally in metadata, such as type names, field names, etc. Encrypting the ~string stream data makes it impossible to obtain the metadata string directly from the dll file.</p><p>Supports encryption virtualization technology, which significantly increases the difficulty of offline cracking.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="blob-stream-encryption">~blob stream encryption<a href="#blob-stream-encryption" class="hash-link" aria-label="Direct link to ~blob stream encryption" title="Direct link to ~blob stream encryption">​</a></h3><p>~blob streams store some complex metadata (such as type signatures). Encrypting the ~blob stream makes it impossible to obtain the original lob data directly from the dll file.</p><p>Supports encryption virtualization technology, which significantly increases the cost of offline cracking.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="us-stream-encryption">~US stream encryption<a href="#us-stream-encryption" class="hash-link" aria-label="Direct link to ~US stream encryption" title="Direct link to ~US stream encryption">​</a></h3><p>The user string (that is, the string used in the code) metadata is saved in the ~US stream.</p><p>Supports encrypted virtualization technology, preventing crackers from directly obtaining original ~US metadata from dll files.</p><p>Supports delayed decryption to prevent crackers from using memory dump technology to directly restore all data.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="table-stream-encryption">~table stream encryption<a href="#table-stream-encryption" class="hash-link" aria-label="Direct link to ~table stream encryption" title="Direct link to ~table stream encryption">​</a></h3><p>The ~table stream holds most of the structured metadata.</p><p>Supporting structure virtualization technology, each version uses different metadata data structures, which greatly increases the cost of cracking. Even if it is cracked, it cannot be restored to the original ~table stream structure through simple data movement or copying.</p><p>Supports encrypted virtualization, which significantly increases the cost of cracking.</p><p>Supports delayed decryption to prevent crackers from using memory dump technology to directly restore all data.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="method-body-data-encryption">method body data encryption<a href="#method-body-data-encryption" class="hash-link" aria-label="Direct link to method body data encryption" title="Direct link to method body data encryption">​</a></h3><p>The function body metadata information is stored in the method body.</p><p>Supports encrypted virtualization, which significantly increases the cost of cracking.</p><p>Supports delayed decryption to prevent crackers from using memory dump technology to directly restore all data.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="structure-virtualization-technology">Structure virtualization technology<a href="#structure-virtualization-technology" class="hash-link" aria-label="Direct link to Structure virtualization technology" title="Direct link to Structure virtualization technology">​</a></h2><p>Structure virtualization technology refers to the use of a dedicated structural virtual machine to parse the structure of metadata, and it can be dynamically adjusted without rebuilding the App. This requires the cracker to re-crack each version, which greatly increases the cost of the cracker.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="encrypted-virtualization-technology">Encrypted virtualization technology<a href="#encrypted-virtualization-technology" class="hash-link" aria-label="Direct link to Encrypted virtualization technology" title="Direct link to Encrypted virtualization technology">​</a></h2><p>Encrypted virtualization technology refers to the use of a dedicated encryption virtual machine to encrypt metadata, and it can be dynamically adjusted without rebuilding the app. This requires the cracker to re-crack each version, which greatly increases the cost of the cracker.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="delayed-decryption-technology">Delayed decryption technology<a href="#delayed-decryption-technology" class="hash-link" aria-label="Direct link to Delayed decryption technology" title="Direct link to Delayed decryption technology">​</a></h2><p>Delayed decryption technology refers to decrypting data only for the first time, effectively preventing crackers from hooking the critical path and directly dumping the complete original data into memory.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="instruction-virtualization-technology">Instruction virtualization technology<a href="#instruction-virtualization-technology" class="hash-link" aria-label="Direct link to Instruction virtualization technology" title="Direct link to Instruction virtualization technology">​</a></h2><p>Instruction virtualization technology refers to converting original IL instructions into customized register virtual machine instructions, effectively preventing crackers from using ready-made decompilation tools to analyze the original code.</p><p>Instruction virtualization technology supports randomized instruction structures. Every time the App is rebuilt, a new instruction set is used (the instruction number and instruction length are completely different), which greatly increases the cost of crackers.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="configuration">Configuration<a href="#configuration" class="hash-link" aria-label="Direct link to Configuration" title="Direct link to Configuration">​</a></h2><p>The encryption field in <code>HybridCLR Settings</code> configures hardening related parameters.</p><table><thead><tr><th>Parameter name</th><th>When encrypting dll, it needs to be consistent with the main package</th><th>Description</th></tr></thead><tbody><tr><td>vmSeed</td><td>is the</td><td>randomized seed for encrypted virtual machines</td></tr><tr><td>metadataSeed</td><td>No</td><td>Randomized encryption seed for metadata</td></tr><tr><td>key</td><td>No</td><td>Encryption parameters used for encryption and decryption</td></tr><tr><td>stringEncCodeLength</td><td>No</td><td>~The encryption instruction length of the string stream</td></tr><tr><td>blobEncCodeLength</td><td>No</td><td>~The encryption instruction length of the blob stream</td></tr><tr><td>userStringEncCodeLength</td><td>No</td><td>~US stream encryption command length</td></tr><tr><td>tableEncCodeLength</td><td>No</td><td>~Encryption instruction length of table stream</td></tr><tr><td>lazyUserStringEncCodeLength</td><td>No</td><td>~Lazy Encryption Instruction Length for US Stream</td></tr><tr><td>methdBodyEncCodeLength</td><td>No</td><td>~Delayed encryption instruction length of the function body</td></tr></tbody></table><p>vmSeed is the randomization seed for encrypted virtual machines. This random seed affects the code of the generated encrypted virtual machine and is compiled into the native code of the main package. Therefore, when generating an encrypted dll, make sure that vmSeed is consistent with the vmSeed used when packaging the main package.
It is recommended to modify this parameter every time a new main package is released.</p><p>MetadtaSeed and key are both dynamic parameters and do not need to be consistent with the main package. This value can be modified every time the encryption hot update dll is updated. It is recommended to modify these values every time or after several versions.</p><p>xxEncCodeLength is the length of the encryption instruction. The larger the value, the more complex the encryption. The decryption time is proportional to the length of the encryption instruction. Since the decryption process will bring some overhead, it is recommended to use the default value. if
It takes too long to load encrypted hot update assemblies. You can reduce these values appropriately.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="encrypted-hot-update-dll">Encrypted hot update dll<a href="#encrypted-hot-update-dll" class="hash-link" aria-label="Direct link to Encrypted hot update dll" title="Direct link to Encrypted hot update dll">​</a></h2><p>The <code>HybridCLR.Editor.Encryption.EncryptUtil</code> class is provided to encrypt the dll. The sample code is as follows:</p><div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">EncryptDll</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name keyword" style="color:#00009f">string</span><span class="token plain"> originalDll</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name keyword" style="color:#00009f">string</span><span class="token plain"> encryptedDll</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         HybridCLR</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Editor</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Encryption</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">EncryptionUtil</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">EncryptDll</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">originalDll</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> encryptedDll</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> SettingsUtil</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">EncryptionSettings</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>For flagship version users, since the default dhao file records the MD5 value of currentDll before encryption, if the dll is encrypted, the dhao file needs to be updated synchronously, otherwise Runtime.LoadDifferentialHybridAssembly will fail to run.
For ease of use, we provide the <code>HybridCLR.Editor.DHE.BuildUtil.EncryptDllAndGenerateDHAODatas</code> function separately to complete the encryption and generation of dhao files in one go.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="load-hot-update-dll-at-runtime">Load hot update dll at runtime<a href="#load-hot-update-dll-at-runtime" class="hash-link" aria-label="Direct link to Load hot update dll at runtime" title="Direct link to Load hot update dll at runtime">​</a></h2><p>There is no difference from ordinary hot update dll, just use <code>Assembly.Load</code>.</p><p>Supplementary metadata dlls can also be encrypted and loaded in the same way as when unencrypted.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/en/docs/business/advancedoptimization"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Offline Instruction Optimization</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/en/docs/business/accesspolicy"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Access Control Policy</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#metadata-obfuscation" class="table-of-contents__link toc-highlight">Metadata obfuscation</a></li><li><a href="#metadata-encryption" class="table-of-contents__link toc-highlight">Metadata encryption</a><ul><li><a href="#custom-dll-file-structure" class="table-of-contents__link toc-highlight">Custom dll file structure</a></li><li><a href="#string-stream-encryption" class="table-of-contents__link toc-highlight">~string stream encryption</a></li><li><a href="#blob-stream-encryption" class="table-of-contents__link toc-highlight">~blob stream encryption</a></li><li><a href="#us-stream-encryption" class="table-of-contents__link toc-highlight">~US stream encryption</a></li><li><a href="#table-stream-encryption" class="table-of-contents__link toc-highlight">~table stream encryption</a></li><li><a href="#method-body-data-encryption" class="table-of-contents__link toc-highlight">method body data encryption</a></li></ul></li><li><a href="#structure-virtualization-technology" class="table-of-contents__link toc-highlight">Structure virtualization technology</a></li><li><a href="#encrypted-virtualization-technology" class="table-of-contents__link toc-highlight">Encrypted virtualization technology</a></li><li><a href="#delayed-decryption-technology" class="table-of-contents__link toc-highlight">Delayed decryption technology</a></li><li><a href="#instruction-virtualization-technology" class="table-of-contents__link toc-highlight">Instruction virtualization technology</a></li><li><a href="#configuration" class="table-of-contents__link toc-highlight">Configuration</a></li><li><a href="#encrypted-hot-update-dll" class="table-of-contents__link toc-highlight">Encrypted hot update dll</a></li><li><a href="#load-hot-update-dll-at-runtime" class="table-of-contents__link toc-highlight">Load hot update dll at runtime</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/en/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Repository</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/focus-creative-games/hybridclr" target="_blank" rel="noopener noreferrer" class="footer__link-item">hybridclr<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/focus-creative-games/il2cpp_plus" target="_blank" rel="noopener noreferrer" class="footer__link-item">il2cpp_plus<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/focus-creative-games/hybridclr_unity" target="_blank" rel="noopener noreferrer" class="footer__link-item">hybridclr package<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/en/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/focus-creative-games/hybridclr" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://gitee.com/focus-creative-games/hybridclr" target="_blank" rel="noopener noreferrer" class="footer__link-item">Gitee<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 <a href="https://code-philosophy.com/">Code Philosophy</a>. All Rights Reserved.</div></div></div></footer></div>
<script src="/en/assets/js/runtime~main.3267a2b5.js"></script>
<script src="/en/assets/js/main.6ae60f83.js"></script>
</body>
</html>