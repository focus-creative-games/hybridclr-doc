<!doctype html>
<html lang="en-us" dir="ltr" class="docs-wrapper docs-doc-page docs-version-7.10.0 plugin-docs plugin-id-default docs-doc-id-business/ultimate/metaversionworkflow">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">MetaVersion Workflow | HybridCLR</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://www.hybridclr.cn/en/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://www.hybridclr.cn/en/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://www.hybridclr.cn/en/docs/7.10.0/business/ultimate/metaversionworkflow"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="7.10.0"><meta data-rh="true" name="docusaurus_tag" content="docs-default-7.10.0"><meta data-rh="true" name="docsearch:version" content="7.10.0"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-7.10.0"><meta data-rh="true" property="og:title" content="MetaVersion Workflow | HybridCLR"><meta data-rh="true" name="description" content="DHE hot updates previously utilized two workflows:"><meta data-rh="true" property="og:description" content="DHE hot updates previously utilized two workflows:"><link data-rh="true" rel="icon" href="/en/img/logo.png"><link data-rh="true" rel="canonical" href="https://www.hybridclr.cn/en/docs/7.10.0/business/ultimate/metaversionworkflow"><link data-rh="true" rel="alternate" href="https://www.hybridclr.cn/docs/7.10.0/business/ultimate/metaversionworkflow" hreflang="zh-cn"><link data-rh="true" rel="alternate" href="https://www.hybridclr.cn/en/docs/7.10.0/business/ultimate/metaversionworkflow" hreflang="en-us"><link data-rh="true" rel="alternate" href="https://www.hybridclr.cn/docs/7.10.0/business/ultimate/metaversionworkflow" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://MHX0T95QPO-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/en/blog/rss.xml" title="HybridCLR RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/en/blog/atom.xml" title="HybridCLR Atom Feed">



<link rel="search" type="application/opensearchdescription+xml" title="HybridCLR" href="/en/opensearch.xml"><link rel="stylesheet" href="/en/assets/css/styles.d067dcfb.css">
<link rel="preload" href="/en/assets/js/runtime~main.89949d70.js" as="script">
<link rel="preload" href="/en/assets/js/main.4e33556d.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/en/"><div class="navbar__logo"><img src="/en/img/logo.png" alt="My Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/en/img/logo.png" alt="My Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">HybridCLR</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/en/docs/7.10.0/intro">Tutorial</a><a class="navbar__item navbar__link" href="/en/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/focus-creative-games/hybridclr" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/en/docs/7.10.0/intro">7.10.0</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/en/docs/business/ultimate/metaversionworkflow">Next</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/en/docs/7.10.0/business/ultimate/metaversionworkflow">7.10.0</a></li><li><a class="dropdown__link" href="/en/docs/7.8.1/business/ultimate/metaversionworkflow">7.8.1</a></li><li><a class="dropdown__link" href="/en/docs/7.6.0/intro">7.6.0</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/docs/7.10.0/business/ultimate/metaversionworkflow" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh-cn">中文</a></li><li><a href="/en/docs/7.10.0/business/ultimate/metaversionworkflow" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en-us">English</a></li></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/7.10.0/intro">介绍</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/7.10.0/other/businesscase">Business Project Cases</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" href="/en/docs/7.10.0/beginner">新手教程</a><button aria-label="Toggle the collapsible sidebar category &#x27;新手教程&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/7.10.0/beginner/quickstart">Getting Started</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/7.10.0/beginner/monobehaviour">Use MonoBehaviour</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/7.10.0/beginner/generic">Use Generics</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/7.10.0/beginner/otherhelp">Other Information</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/en/docs/7.10.0/basic">使用指南</a><button aria-label="Toggle the collapsible sidebar category &#x27;使用指南&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/en/docs/7.10.0/business">商业化版本</a><button aria-label="Toggle the collapsible sidebar category &#x27;商业化版本&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/7.10.0/business/intro">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/7.10.0/business/differentialhybridexecution">Differential Hybrid Execution (DHE)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/7.10.0/business/fullgenericsharing">Full Generic Sharing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/7.10.0/business/metadataoptimization">Metadata Optimization</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/7.10.0/business/hotfix">Hotfix</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/7.10.0/business/assemblyloadoptimization">Assembly::Load Loading Time Optimization</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/7.10.0/business/crashreport">Crash Report With Interpreter Strace Trace</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/7.10.0/business/basicoptimization">Standard Interpretation Optimization</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/7.10.0/business/advancedoptimization">Offline Instruction Optimization</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/7.10.0/business/basicencryption">Code Encryption</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/7.10.0/business/accesspolicy">Access Control Policy</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/7.10.0/business/businesscase">Commercial Project Cases</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/en/docs/7.10.0/pro">专业版</a><button aria-label="Toggle the collapsible sidebar category &#x27;专业版&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/en/docs/7.10.0/ultimate">旗舰版</a><button aria-label="Toggle the collapsible sidebar category &#x27;旗舰版&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/7.10.0/business/ultimate/intro">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/7.10.0/business/ultimate/quickstartunchecked">Quick Start</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/7.10.0/business/ultimate/build">Building and Hot Updating</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/7.10.0/business/ultimate/loadassembly">Loading Hot-Update Assemblies</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/en/docs/7.10.0/business/ultimate/metaversionworkflow">MetaVersion Workflow</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/7.10.0/business/ultimate/dhaoworkflow">DHAO Workflow</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/7.10.0/business/ultimate/manual">User Manual</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/7.10.0/business/ultimate/injectrules">Function Injection Rules</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/7.10.0/business/ultimate/retargetmetadata">Redirect metadata</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/7.10.0/business/ultimate/commonerrors">Frequently Asked Questions</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/en/docs/7.10.0/reload">热重载版</a><button aria-label="Toggle the collapsible sidebar category &#x27;热重载版&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/en/docs/7.10.0/help">帮助</a><button aria-label="Toggle the collapsible sidebar category &#x27;帮助&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/en/docs/7.10.0/other">其他</a><button aria-label="Toggle the collapsible sidebar category &#x27;其他&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for <!-- -->HybridCLR<!-- --> <b>7.10.0</b>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/en/docs/business/ultimate/metaversionworkflow">latest version</a></b> (<!-- -->Next<!-- -->).</div></div><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/en/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/en/docs/7.10.0/business"><span itemprop="name">商业化版本</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/en/docs/7.10.0/ultimate"><span itemprop="name">旗舰版</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">MetaVersion Workflow</span><meta itemprop="position" content="3"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: 7.10.0</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>MetaVersion Workflow</h1><p>DHE hot updates previously utilized two workflows:</p><ul><li>DHAO Workflow</li><li>MetaVersion Workflow</li></ul><p>In versions <code>v7.6.0</code> and earlier, the build workflow was based on the DHAO Workflow. The DHAO Workflow used dhao files to record which types and functions had changed. When HybridCLR loaded a DHE assembly, it would determine whether to call the original AOT function or execute the new code based on the changes recorded in the dhao file.  </p><p>The dhao file was generated by comparing the latest hot update DHE DLL with the original DHE DLL in the main package. While its principle was straightforward, the downside was that if multiple main packages were released, a separate dhao file would be required for each main package. This process became complex and difficult to manage when there were many main packages.</p><p>Starting from version <code>v7.7.0</code>, the MetaVersion Workflow was introduced to address these shortcomings of the DHAO Workflow.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="principle">Principle<a href="#principle" class="hash-link" aria-label="Direct link to Principle" title="Direct link to Principle">​</a></h2><p>The MetaVersion Workflow assigns a unique version number to each type and function in a DLL. When loading a DHE assembly using <code>RuntimeApi.LoadDifferentialHybridAssemblyWithMetaVersion</code>, it compares the meta version of the latest hot update assembly with the meta version of the AOT snapshot in the current main package to determine whether a type or function has changed. This approach only requires generating a single meta version file for each hot update DHE DLL, which can be used for hot updates across all main packages.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="basic-concepts">Basic Concepts<a href="#basic-concepts" class="hash-link" aria-label="Direct link to Basic Concepts" title="Direct link to Basic Concepts">​</a></h2><p>Before diving into the MetaVersion Workflow, it is essential to understand several key terms:</p><ul><li>Snapshot</li><li>Inject Rule files</li><li>Meta Version files</li><li>Meta Spec files</li><li>manifest.json</li><li>signature-mapper.json</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="snapshot">Snapshot<a href="#snapshot" class="hash-link" aria-label="Direct link to Snapshot" title="Direct link to Snapshot">​</a></h3><p>A Snapshot is a collection of files required to generate meta version files, including:</p><ul><li>DLL files</li><li>Inject Rule files</li><li>manifest.json</li><li>Meta Version files</li><li>Meta Spec files</li><li>signature-mapper.json</li></ul><p>There are two types of Snapshots: AOT Snapshot and HotUpdate Snapshot.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="inject-rule-files">Inject Rule Files<a href="#inject-rule-files" class="hash-link" aria-label="Direct link to Inject Rule Files" title="Direct link to Inject Rule Files">​</a></h3><p>By default, code is injected at the beginning of almost all DHE functions. This injection can significantly mitigate the problem of dirty function propagation, but it increases code size and introduces a small amount of additional overhead. Inject Rule files are used to customize injection rules, allowing certain functions to be excluded from injection. For detailed documentation, see <a href="/en/docs/7.10.0/business/ultimate/injectrules">Function Injection Policies</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="manifestjson">manifest.json<a href="#manifestjson" class="hash-link" aria-label="Direct link to manifest.json" title="Direct link to manifest.json">​</a></h3><p>This file records information such as the list of DHE assemblies. When comparing and calculating the meta version files of two AOT Snapshots, it checks the consistency of the DHE assembly list. Only AOT Snapshots with identical DHE assembly lists can correctly calculate the meta version.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="meta-version-files">Meta Version Files<a href="#meta-version-files" class="hash-link" aria-label="Direct link to Meta Version Files" title="Direct link to Meta Version Files">​</a></h3><p>Meta Version files store version information for all metadata. When loading a DHE assembly, the system compares the meta version file of the hot update assembly with the original DHE assembly&#x27;s meta version file to determine whether changes have occurred, and subsequently decides whether to call the original AOT function or execute the interpreted function.</p><p>Meta Version files use the <code>.mv.bytes</code> suffix.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="meta-spec-files">Meta Spec Files<a href="#meta-spec-files" class="hash-link" aria-label="Direct link to Meta Spec Files" title="Direct link to Meta Spec Files">​</a></h3><p>Meta Spec files are human-readable versions of Meta Version files. These files are not used during runtime. It is recommended to add them to version control, but they should not be included in the hot update resource system, as they serve no purpose there!</p><p>There are two types of Meta Spec files:</p><ul><li><code>*.mv.spec</code>: Records complete meta version information.</li><li><code>*.mv.diff.spec</code>: Records changes in the meta version information. This file can be used to quickly identify which types and functions have changed.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="signature-mapperjson">signature-mapper.json<a href="#signature-mapperjson" class="hash-link" aria-label="Direct link to signature-mapper.json" title="Direct link to signature-mapper.json">​</a></h3><p>When C# code is modified (especially when types or functions are added or removed), the tokens for the same types and functions in the generated DLL may change. If the meta version file only records these metadata tokens, it would take a significant amount of time at runtime to establish the mapping between old and new tokens. A better solution is to record the signature information of each token and quickly establish the mapping by comparing signatures.</p><p>Since signature strings are very long, to save space and facilitate runtime comparison, these strings are mapped to unique integers in advance. The <code>signature-mapper.json</code> file records this mapping relationship.</p><p>The <code>signature-mapper.json</code> file is only needed when generating meta version files and is not used during runtime. It is recommended to add this file to version control, but it should not be included in the hot update resource system!</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="build-and-hot-update-workflow">Build and Hot Update Workflow<a href="#build-and-hot-update-workflow" class="hash-link" aria-label="Direct link to Build and Hot Update Workflow" title="Direct link to Build and Hot Update Workflow">​</a></h2><ul><li><p><strong>Building the Main Package</strong></p><ul><li>Export the main package project or build the main package directly.</li><li>Create the corresponding AOT Snapshot.</li><li>Add the meta version files from the AOT Snapshot to the main package&#x27;s StreamingAssets directory (optional but highly recommended).</li></ul></li><li><p><strong>Publishing Hot Updates</strong></p><ul><li>Create a HotUpdate Snapshot.</li><li>Add the hot update DLLs and meta version files from the HotUpdate Snapshot to the hot update resource system.</li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="aot-snapshot">AOT Snapshot<a href="#aot-snapshot" class="hash-link" aria-label="Direct link to AOT Snapshot" title="Direct link to AOT Snapshot">​</a></h2><p>The AOT Snapshot records the AOT information of the main package and has several core functions:</p><ul><li>It records its own meta version information.</li><li>It is used to calculate the meta version information for subsequent main package versions.</li><li>It is used to calculate the meta version information for hot update code.</li></ul><p>The directory structure of an AOT Snapshot is as follows:</p><div class="language-txt codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-txt codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  AotSnapshotDir</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ├── *.dll</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ├── InjectRules</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ├── MetaVersions</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ├── *.mv.bytes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ├── *.mv.spec</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ├── *.mv.diff.spec</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ├── signature-mapper.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    └── manifest.json</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The AOT Snapshot is fully determined during the main package build process. Please add it to your project&#x27;s version control system.</p><p>Since the <code>*.mv.bytes</code> file from the AOT Snapshot is required when loading a DHE assembly using <code>RuntimeApi::LoadDifferentialHybridAssemblyWithMetaVersion</code>, it is recommended to include this file with the main package.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="creating-an-aot-snapshot">Creating an AOT Snapshot<a href="#creating-an-aot-snapshot" class="hash-link" aria-label="Direct link to Creating an AOT Snapshot" title="Direct link to Creating an AOT Snapshot">​</a></h3><div class="theme-admonition theme-admonition-warning alert alert--danger admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>danger</div><div class="admonitionContent_S0QG"><p>The DLLs in the AOT Snapshot must match the binary code of the main package exactly. Please create the AOT Snapshot <strong>after</strong> exporting the project or building the main package! Do not use the AOT DLLs generated by <code>HybridCLR/Generate/All</code>!</p></div></div><p>The process is as follows:</p><ul><li>Create the base AOT snapshot file.</li><li>Generate the meta version for the DHE DLLs in the base AOT snapshot.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="creating-the-base-aot-snapshot-file">Creating the Base AOT Snapshot File<a href="#creating-the-base-aot-snapshot-file" class="hash-link" aria-label="Direct link to Creating the Base AOT Snapshot File" title="Direct link to Creating the Base AOT Snapshot File">​</a></h4><p>Call <code>MetaVersionWorkflow.CreateAotSnapshot(BuildTarget target, string outputSnapshotDir)</code> to create the base snapshot file.</p><p><code>CreateAotSnapshot</code> performs the following tasks:</p><ul><li>Copies all AOT and DHE DLLs.</li><li>Copies the inject rule files to the <code>InjectRules</code> directory.</li><li>Creates a <code>manifest.json</code> file, which records the list of all DHE assemblies.</li></ul><p>The base snapshot directory structure is as follows:</p><div class="language-txt codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-txt codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  AotSnapshot</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ├── *.dll</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ├── InjectRules</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ├── rule1.xml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ├── rule2.xml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  └── manifest.json</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="generating-meta-version-files-for-dhe-dlls-in-the-base-aot-snapshot">Generating Meta Version Files for DHE DLLs in the Base AOT Snapshot<a href="#generating-meta-version-files-for-dhe-dlls-in-the-base-aot-snapshot" class="hash-link" aria-label="Direct link to Generating Meta Version Files for DHE DLLs in the Base AOT Snapshot" title="Direct link to Generating Meta Version Files for DHE DLLs in the Base AOT Snapshot">​</a></h4><p>Call <code>MetaVersionWorkflow.GenerateAotSnapshotMetaVersionFiles(string prevSnapshotDir, string curSnapshotDir)</code> to generate the meta version files for the DHE DLLs in the snapshot.</p><p>The rules for the <code>prevSnapshotDir</code> parameter in <code>MetaVersionWorkflow.GenerateAotSnapshotMetaVersionFiles</code> are as follows:</p><ul><li>If this is the first AOT Snapshot (i.e., there is no older AOT Snapshot), <code>prevSnapshotDir</code> should be <code>null</code>.</li><li>If the project uses a single main package mode (i.e., only one main package is valid at a time and a new main package invalidates the old one), <code>prevSnapshotDir</code> should be <code>null</code>.</li><li>If the project uses a <strong>multi-main package</strong> mode (i.e., old main packages remain valid after a new one is released), the <code>prevSnapshotDir</code> parameter should point to the most recently released AOT Snapshot directory with the same build target.</li></ul><p><code>GenerateAotSnapshotMetaVersionFiles</code> generates the following files:</p><ul><li>Meta Version files, placed in the <code>MetaVersions</code> directory.</li><li><code>signature-mapper.json</code> file.</li></ul><p>The directory structure before generation is as follows:</p><div class="language-txt codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-txt codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  Snapshots</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ├── PrevAotSnapshotDir</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ├── *.dll</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ├── InjectRules</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ├── MetaVersions</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ├── *.mv.bytes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ├── *.mv.spec</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ├── *.mv.diff.spec</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ├── signature-mapper.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      └── manifest.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ├── CurrentSnapshotDir</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ├── *.dll</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ├── InjectRules</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      └── manifest.json</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>After generation, the <code>MetaVersions</code> directory and <code>signature-mapper.json</code> file are added. The final directory structure is as follows:</p><div class="language-txt codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-txt codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  Snapshots</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ├── PrevAotSnapshotDir</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ├── *.dll</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ├── InjectRules</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ├── MetaVersions</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ├── *.mv.bytes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ├── *.mv.spec</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ├── *.mv.diff.spec</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ├── signature-mapper.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      └── manifest.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ├── CurrentAotSnapshotDir</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ├── *.dll</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ├── InjectRules</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ├── MetaVersions (New)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ├── *.mv.bytes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ├── *.mv.spec</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ├── *.mv.diff.spec</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ├── signature-mapper.json (New)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      └── manifest.json</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="multi-platform-considerations">Multi-Platform Considerations<a href="#multi-platform-considerations" class="hash-link" aria-label="Direct link to Multi-Platform Considerations" title="Direct link to Multi-Platform Considerations">​</a></h4><p>Most games are released on multiple platforms. Since there are significant differences in the main package AOT DLLs between platforms, it is <strong>strongly recommended</strong> to maintain separate AOT Snapshot trees for each platform. The directory structure should be similar to the following:</p><div class="language-txt codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-txt codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  Snapshots</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ├── PreAotSnapshotDir-StandaloneWindows64</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ├── CurrentAotSnapshotDir-StandaloneWindows64</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ├── PreAotSnapshotDir-Android64</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ├── CurrentAotSnapshotDir-Android64</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ├── PreAotSnapshotDir-iOS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ├── CurrentAotSnapshotDir-iOS</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>For example, when calculating the meta version for a newly released Win64 main package, use the snapshot directory of the previously released Win64 main package and the new main package&#x27;s snapshot to compute the meta version for the new main package.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="version-control">Version Control<a href="#version-control" class="hash-link" aria-label="Direct link to Version Control" title="Direct link to Version Control">​</a></h4><p>The directory structure mentioned in the previous section is not convenient for version control. A more suitable directory structure for version control is as follows:</p><div class="language-txt codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-txt codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  Snapshots</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ├── AotSnapshotDir-StandaloneWindows64</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ├── AotSnapshotDir-Android64</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ├── AotSnapshotDir-iOS</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The Snapshot update process is as follows:</p><ul><li>Create a temporary <code>CurrentAotSnapshotDir-{buildTarget}</code> directory for the latest main package.</li><li>Compare <code>CurrentAotSnapshotDir-{buildTarget}</code> with <code>AotSnapshotDir-{buildTarget}</code> to generate the meta version files for <code>CurrentAotSnapshotDir-{buildTarget}</code>.</li><li>Replace <code>AotSnapshotDir-{buildTarget}</code> with <code>CurrentAotSnapshotDir-{buildTarget}</code>.</li><li>Commit <code>AotSnapshotDir-{buildTarget}</code> to the repository.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="hotupdate-snapshot">HotUpdate Snapshot<a href="#hotupdate-snapshot" class="hash-link" aria-label="Direct link to HotUpdate Snapshot" title="Direct link to HotUpdate Snapshot">​</a></h2><p>A HotUpdate Snapshot is created each time a code hot update is published. Compared to an AOT Snapshot, a HotUpdate Snapshot only contains the following files:</p><ul><li>The latest hot update assembly files</li><li>The meta version information for the latest DHE assemblies</li><li><code>signature-mapper.json</code></li></ul><p>The directory structure is as follows:</p><div class="language-txt codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-txt codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  HotUpdateSnapshotDir</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ├── *.dll</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ├── MetaVersions</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ├── *.mv.bytes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ├── *.mv.spec</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ├── *.mv.diff.spec</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ├── signature-mapper.json (New)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>When publishing a hot update, only the hot update assembly DLL files and the meta version files for the DHE assemblies are needed. Add these files to the hot update resource system.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="creating-a-hotupdate-snapshot">Creating a HotUpdate Snapshot<a href="#creating-a-hotupdate-snapshot" class="hash-link" aria-label="Direct link to Creating a HotUpdate Snapshot" title="Direct link to Creating a HotUpdate Snapshot">​</a></h3><p>The creation process is as follows:</p><ul><li>Use <code>HybridCLR/CompileDll/ActivedBuildTarget</code> to generate the hot update DLLs.</li><li>Generate the meta version files for the hot update assemblies.</li></ul><p>Call <code>MetaVersionWorkflow.GenerateHotUpdateMetaVersionFiles(string aotSnapshotDir, string hotUpdateSnapshotDir)</code> to generate the meta version files for the hot update assemblies. Here, <code>aotSnapshotDir</code> is the latest <code>AotSnapshot-{buildTarget}</code> directory, and <code>hotUpdateSnapshotDir</code> is the directory containing the latest hot update assemblies.</p><p>After calling this function, the meta version files for the DHE assemblies will be generated in the <code>{hotUpdateSnapshotDir}/MetaVersions</code> directory. The directory structure is similar to the following:</p><div class="language-txt codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-txt codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  HotUpdateSnapshot</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ├── *.dll</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/en/docs/7.10.0/business/ultimate/loadassembly"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Loading Hot-Update Assemblies</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/en/docs/7.10.0/business/ultimate/dhaoworkflow"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">DHAO Workflow</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#principle" class="table-of-contents__link toc-highlight">Principle</a></li><li><a href="#basic-concepts" class="table-of-contents__link toc-highlight">Basic Concepts</a><ul><li><a href="#snapshot" class="table-of-contents__link toc-highlight">Snapshot</a></li><li><a href="#inject-rule-files" class="table-of-contents__link toc-highlight">Inject Rule Files</a></li><li><a href="#manifestjson" class="table-of-contents__link toc-highlight">manifest.json</a></li><li><a href="#meta-version-files" class="table-of-contents__link toc-highlight">Meta Version Files</a></li><li><a href="#meta-spec-files" class="table-of-contents__link toc-highlight">Meta Spec Files</a></li><li><a href="#signature-mapperjson" class="table-of-contents__link toc-highlight">signature-mapper.json</a></li></ul></li><li><a href="#build-and-hot-update-workflow" class="table-of-contents__link toc-highlight">Build and Hot Update Workflow</a></li><li><a href="#aot-snapshot" class="table-of-contents__link toc-highlight">AOT Snapshot</a><ul><li><a href="#creating-an-aot-snapshot" class="table-of-contents__link toc-highlight">Creating an AOT Snapshot</a></li></ul></li><li><a href="#hotupdate-snapshot" class="table-of-contents__link toc-highlight">HotUpdate Snapshot</a><ul><li><a href="#creating-a-hotupdate-snapshot" class="table-of-contents__link toc-highlight">Creating a HotUpdate Snapshot</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/en/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Repository</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/focus-creative-games/hybridclr" target="_blank" rel="noopener noreferrer" class="footer__link-item">hybridclr<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/focus-creative-games/il2cpp_plus" target="_blank" rel="noopener noreferrer" class="footer__link-item">il2cpp_plus<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/focus-creative-games/hybridclr_unity" target="_blank" rel="noopener noreferrer" class="footer__link-item">hybridclr package<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/en/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/focus-creative-games/hybridclr" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://gitee.com/focus-creative-games/hybridclr" target="_blank" rel="noopener noreferrer" class="footer__link-item">Gitee<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 <a href="https://code-philosophy.com/">Code Philosophy</a>. All Rights Reserved.</div></div></div></footer></div>
<script src="/en/assets/js/runtime~main.89949d70.js"></script>
<script src="/en/assets/js/main.4e33556d.js"></script>
</body>
</html>